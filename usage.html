<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.7.1 at 2016-11-01 
 | Rendered using Apache Maven Fluido Skin 1.5
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20161101" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Multi Module Release Maven Plugin &#x2013; Usage</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.5.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.5.min.js"></script>

                      </head>
        <body class="topBarEnabled">
          
    
    
            
    
        
    <a href="https://github.com/SourcePond/multi-module-release-maven-plugin">
      <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_right_gray_6d6d6d.png"
        alt="Fork me on GitHub">
    </a>
  
                
                    
                

    <div id="topbar" class="navbar navbar-fixed-top ">
      <div class="navbar-inner">
                <div class="container-fluid">
        <a data-target=".nav-collapse" data-toggle="collapse" class="btn btn-navbar">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </a>
                
                                <ul class="nav">
                          <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Overview <b class="caret"></b></a>
        <ul class="dropdown-menu">
        
                      <li>      <a href="index.html"  title="Introduction">Introduction</a>
</li>
                  
                      <li>      <a href="plugin-info.html"  title="Goals">Goals</a>
</li>
                  
                      <li>      <a href="usage.html"  title="Usage">Usage</a>
</li>
                  
                      <li>      <a href="FAQ.html"  title="FAQ">FAQ</a>
</li>
                  
                      <li>      <a href="changelog.html"  title="Changelog">Changelog</a>
</li>
                          </ul>
      </li>
                <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Project Documentation <b class="caret"></b></a>
        <ul class="dropdown-menu">
        
                      <li class="dropdown-submenu">
                                      <a href="project-info.html"  title="Project Information">Project Information</a>
              <ul class="dropdown-menu">
                                  <li>      <a href="team-list.html"  title="Team">Team</a>
</li>
                                  <li>      <a href="integration.html"  title="CI Management">CI Management</a>
</li>
                                  <li>      <a href="issue-tracking.html"  title="Issue Management">Issue Management</a>
</li>
                                  <li>      <a href="license.html"  title="Licenses">Licenses</a>
</li>
                                  <li>      <a href="source-repository.html"  title="Source Code Management">Source Code Management</a>
</li>
                              </ul>
            </li>
                  
                      <li class="dropdown-submenu">
                                      <a href="project-reports.html"  title="Project Reports">Project Reports</a>
              <ul class="dropdown-menu">
                                  <li>      <a href="plugin-info.html"  title="Plugin Documentation">Plugin Documentation</a>
</li>
                                  <li>      <a href="surefire-report.html"  title="Surefire Report">Surefire Report</a>
</li>
                              </ul>
            </li>
                          </ul>
      </li>
                  </ul>
          
          
          
                   
                      </div>
          
        </div>
      </div>
    </div>
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                <div id="bannerLeft">
                <h2>Multi Module Release Maven Plugin</h2>
                </div>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
              
                  <li id="publishDate">Last Published: 2016-11-01
                      <span class="divider">|</span>
                   </li>
                  <li id="projectVersion">Version: 2.0.0
                      </li>
                      
              
      
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
              
                <ul class="nav nav-list">
                    <li class="nav-header">Overview</li>
                              
      <li>
  
                          <a href="index.html" title="Introduction">
          <span class="none"></span>
        Introduction</a>
            </li>
                
      <li>
  
                          <a href="plugin-info.html" title="Goals">
          <span class="none"></span>
        Goals</a>
            </li>
                
      <li class="active">
  
            <a href="#"><span class="none"></span>Usage</a>
          </li>
                
      <li>
  
                          <a href="FAQ.html" title="FAQ">
          <span class="none"></span>
        FAQ</a>
            </li>
                
      <li>
  
                          <a href="changelog.html" title="Changelog">
          <span class="none"></span>
        Changelog</a>
            </li>
                              <li class="nav-header">Project Documentation</li>
                                                                                                                                                        
      <li>
  
                          <a href="project-info.html" title="Project Information">
          <span class="icon-chevron-right"></span>
        Project Information</a>
                  </li>
                                                                                    
      <li>
  
                          <a href="project-reports.html" title="Project Reports">
          <span class="icon-chevron-right"></span>
        Project Reports</a>
                  </li>
            </ul>
              
                
          <hr />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span10" >
                                  
            <div class="section">
<h2><a name="Usage"></a>Usage</h2>
<p>Add the plugin to your pom:</p>

<div class="source">
<div class="source"><pre class="prettyprint">&lt;build&gt;
    &lt;plugins&gt;
        &lt;plugin&gt;
            &lt;groupId&gt;ch.sourcepond.maven.plugins&lt;/groupId&gt;
            &lt;artifactId&gt;multi-module-release-maven-plugin&lt;/artifactId&gt;
            &lt;version&gt;2.0.0&lt;/version&gt;
            &lt;configuration&gt;
                &lt;releaseGoals&gt;
                    &lt;releaseGoal&gt;deploy&lt;/releaseGoal&gt;
                &lt;/releaseGoals&gt;
            &lt;/configuration&gt;
        &lt;/plugin&gt;
    &lt;/plugins&gt;
&lt;/build&gt;
</pre></div></div>
<p>And then call the plugin:</p>

<div class="source">
<div class="source"><pre class="prettyprint">mvn releaser:release
</pre></div></div>
<p>You can also optionally supply your own build numbers if you do not want an automatically incrementing number:</p>

<div class="source">
<div class="source"><pre class="prettyprint">mvn releaser:release -DbuildNumber=1234
</pre></div></div></div>
<div class="section">
<h2><a name="Running_a_partial_release"></a>Running a partial release</h2>
<p>It is possible to release a single module (and any modules it depends on) by using the <tt>modulesToRelease</tt> parameter. For example:</p>

<div class="source">
<div class="source"><pre class="prettyprint">mvn releaser:release -DmodulesToRelease=MyApp
</pre></div></div>
<p>In this case the <tt>MyApp</tt> module will be built, released and tagged. If MyApp depends on another module, than that module will also be built and released (but there will be no Git tag for this).</p>
<p>Note that this is not generally required as the plugin will only deploy changed modules by default anyway.</p></div>
<div class="section">
<h2><a name="Forcing_a_release"></a>Forcing a release</h2>
<p>It is possible to force the release of one or more specified modules, for example if the changes have not been picked up due to some issue. To do this, use the <tt>forceRelease</tt> parameter. For example:</p>

<div class="source">
<div class="source"><pre class="prettyprint">mvn releaser:release -DforceRelease=MyApp
</pre></div></div>
<p>In this case the <tt>MyApp</tt> module will be built, even if there where no changes found.</p></div>
<div class="section">
<h2><a name="Specify_custom_globaluser_Maven_settings_for_release_build"></a>Specify custom global/user Maven settings for release build</h2>
<p>Sometimes it&#x2019;s necessary to specify custom Maven settings for the release build. This can be done with the optional plugin properties <b>globalSettings</b> (defaults to <tt>$M2_HOME/conf/settings.xml</tt>) and <b>userSettings</b> (defaults to <tt>${user.home}/.m2/settings.xml</tt>). These properties are used to specify the path to a custom Maven settings file:</p>

<div class="source">
<div class="source"><pre class="prettyprint">&lt;plugin&gt;
    ...
    &lt;configuration&gt;
       &lt;userSettings&gt;/path/to/my/settings.xml&lt;/userSettings&gt;
    &lt;/configuration&gt;
&lt;/plugin&gt;   
</pre></div></div>
<p>Or</p>

<div class="source">
<div class="source"><pre class="prettyprint">&lt;plugin&gt;
    ...
    &lt;configuration&gt;
       &lt;globalSettings&gt;/path/to/global/settings.xml&lt;/globalSettings&gt;
    &lt;/configuration&gt;
&lt;/plugin&gt;
</pre></div></div>
<p>Or both</p>

<div class="source">
<div class="source"><pre class="prettyprint">&lt;plugin&gt;
    ...
    &lt;configuration&gt;
       &lt;globalSettings&gt;/path/to/global/settings.xml&lt;/globalSettings&gt;
       &lt;userSettings&gt;/path/to/my/settings.xml&lt;/userSettings&gt;
    &lt;/configuration&gt;
&lt;/plugin&gt;
</pre></div></div>
<p>Note: properties from user settings always <i>override</i> those derived from global settings, see <a class="externalLink" href="https://maven.apache.org/settings.html#Quick_Overview">https://maven.apache.org/settings.html#Quick_Overview</a> for further information.</p></div>
<div class="section">
<h2><a name="SSH_authentication"></a>SSH authentication</h2>
<p>Currently, only public key authentication is supported. By default, the plugin reads the private key from <tt>~/.ssh/id_rsa</tt>. If it&#x2019;s required to use a private key file from another location, you have two opportunities to achieve this:</p>
<div class="section">
<h3><a name="Add_server_section_to_your_Maven_settings"></a>Add server section to your Maven settings</h3>
<p>This is the preferred way. Firstly, add a server section to your Maven settings like this (see <a class="externalLink" href="https://maven.apache.org/settings.html#Servers">https://maven.apache.org/settings.html#Servers</a> for further information):</p>

<div class="source">
<div class="source"><pre class="prettyprint">&lt;settings&gt;
    &lt;servers&gt;
       &lt;server&gt;
         &lt;id&gt;my-server&lt;/id&gt;
         &lt;privateKey&gt;/path/to/your/private_key&lt;/privateKey&gt;
         &lt;passphrase&gt;optional_passphrase&lt;/passphrase&gt; &lt;!-- This is optional --&gt;
       &lt;/server&gt;
    &lt;/servers&gt;
&lt;/settings&gt;
</pre></div></div>
<p>If your key is password protected, specify the password within element <b>passphrase</b>. Tip: do <i>not confuse</i> this with element <b>password</b>.</p>
<p>Secondly, specify the <tt>serverId</tt> in the plugin configuration</p>

<div class="source">
<div class="source"><pre class="prettyprint">&lt;plugin&gt;
    ...
    &lt;configuration&gt;
       &lt;serverId&gt;my-server&lt;/serverId&gt;
    &lt;/configuration&gt;
&lt;/plugin&gt;   
</pre></div></div></div>
<div class="section">
<h3><a name="Specify_private_key_and_optional_passphrase_in_your_POM"></a>Specify private key and optional passphrase in your POM</h3>
<p>This is the insecure way to specify your custom private key. Add following properties to your plugin configuration:</p>

<div class="source">
<div class="source"><pre class="prettyprint">&lt;plugin&gt;
    ...
    &lt;configuration&gt;
       &lt;privateKey&gt;/path/to/your/private_key&lt;/privateKey&gt;
       &lt;passphrase&gt;optional_passphrase&lt;/passphrase&gt; &lt;!-- This is optional --&gt;
    &lt;/configuration&gt;
&lt;/plugin&gt;
</pre></div></div>
<p>Note: POM configuration has precedence over Maven settings.</p></div></div>
<div class="section">
<h2><a name="Custom_known_hosts"></a>Custom known_hosts</h2>
<p>Per default, the plugin uses <tt>~/.ssh/known_hosts</tt>. You can override this with following property in your plugin configuration:</p>

<div class="source">
<div class="source"><pre class="prettyprint">&lt;plugin&gt;
    ...
    &lt;configuration&gt;
       &lt;knownHosts&gt;/path/to/your/known_hosts&lt;/knownHosts&gt;
    &lt;/configuration&gt;
&lt;/plugin&gt;
</pre></div></div>
<p>Note: Maven settings related to <tt>known_hosts</tt> will <i>not</i> be considered by the plugin.</p></div>
<div class="section">
<h2><a name="Automatic_snapshot_increment"></a>Automatic snapshot increment</h2>
<p>Like the <a class="externalLink" href="http://maven.apache.org/maven-release/maven-release-plugin">maven-release-plugin</a>, the multi-module-release-maven-plugin supports to increment the snapshot versions of all released artifacts. This is especially useful if you work with version ranges in you projects. Suppose you have a project <b>A</b> which depends on project <b>B</b>. Furthermore, suppose project <b>A</b> needs project <b>B</b> in version &gt;= 1.0 and &lt; 2.0. In this case, you would add following dependency to project <b>A</b>:</p>

<div class="source">
<div class="source"><pre class="prettyprint">&lt;dependency&gt;
    &lt;groupId&gt;org.foo&lt;/groupId&gt;
    &lt;artifactId&gt;B&lt;/groupId&gt;
    &lt;version&gt;[0.999,1.999)&lt;/version&gt;
&lt;/dependency&gt;
</pre></div></div>
<p>Note: Why [0.999,1.999) and not [1.0,2.0) you ask? Short answer: because Maven currently (3.3.9) does not support version ranges well; since Maven 3, SNAPSHOTS are included when version ranges are resolved. Following explanation will not cover details about how to implement a proper deployment process with version ranges, but, you can find interesting solutions in the discussion section of (<a class="externalLink" href="https://issues.apache.org/jira/browse/MNG-3092">https://issues.apache.org/jira/browse/MNG-3092</a>) (attention: long read!).</p>
<p>Now, you would like to release project <b>B</b> which currently has version 1.0-SNAPSHOT. Project <b>A</b> is already released and remains untouched. After release, you have two artifacts in your Maven repository: <b>B:1.0-SNAPSHOT</b> and <b>B:1.0.0</b>. After this, project <b>A</b> references <b>B:1.0.0</b> because a release is always newer than a SNAPSHOT, which means that <b>1.0.0</b> is newer than <b>1.0-SNAPSHOT</b>.</p>
<p>This behavior causes troubles when you want to realize a (deployment-) process like this:</p>

<ul>
  
<li>One time, you want to resolve <b>B:1.0-SNAPSHOT</b> because you are deploying to a development system.</li>
  
<li>Another time, you want to resolve <b>B:1.0.0</b> because you are deploying to production system.</li>
</ul>
<p>To achieve this, you cannot work with the <i>major.minor-SNAPSHOT</i> scheme in your projects and let the plugin simply add a build-number. The reason is, that the development deployment process will always reference the latest release. In other words, your latest SNAPSHOT will never be deployed again after the first release. To avoid this, you firstly need to work with the same version scheme for SNAPSHOTs like for releases. For instance, if you want to release project <b>B</b> with version <b>1.0.0</b>, the SNAPSHOT version before that release must be <b>1.0.0-SNAPSHOT</b> (this differs to the default use-case of this plugin). Secondly, you need to enable following configuration parameter:</p>

<div class="source">
<div class="source"><pre class="prettyprint">&lt;plugin&gt;
    ...
    &lt;configuration&gt;
       &lt;incrementSnapshotVersionAfterRelease&gt;true&lt;/incrementSnapshotVersionAfterRelease&gt;
    &lt;/configuration&gt;
&lt;/plugin&gt;   
</pre></div></div>
<p>If enabled, the plugin will perform additional actions after the release had been done. For the scenario above, following would happen:</p>

<ul>
  
<li>Update the version of project <b>B</b> to <b>1.0.1-SNAPSHOT</b></li>
  
<li>Commit and push the changes to the SCM repository with a specified comment</li>
</ul>
<p>In this mode, the release plugin will base the next build-number on the micro-version of the SNAPSHOT version incremented by 1. You can override this by specifying a build-number which is greater than the micro-version, see &#x201c;Usage&#x201d; section of this document. </p>
<div class="section">
<h3><a name="Partial_release_of_modules_when_automatic_snapshot_increment_is_enabled"></a>Partial release of modules when automatic snapshot increment is enabled</h3>
<p>The multi-module-release-maven-plugin will take care of what needs to be released and which dependencies need to be updated. Suppose you have a multi-module project <b>parent</b> with a module <b>A</b> and a module <b>B</b> where both modules have their own parent. Both modules have version &#x201c;1.0.0-SNAPSHOT&#x201d; and module <b>B</b> depends on module <b>A</b>. To achieve this, you would add following dependency to module <b>B</b>:</p>

<div class="source">
<div class="source"><pre class="prettyprint">&lt;dependency&gt;
    &lt;groupId&gt;org.foo&lt;/groupId&gt;
    &lt;artifactId&gt;A&lt;/groupId&gt;
    &lt;version&gt;1.0.0-SNAPSHOT&lt;/version&gt;
&lt;/dependency&gt;
</pre></div></div>
<p>Now, you release the whole project including <b>parent</b>, <b>A</b> and <b>B</b>. After release, the multi-module-release-maven-plugin will take following actions:</p>

<ul>
  
<li>Update the version of project <b>parent</b> to <b>1.0.1-SNAPSHOT</b></li>
  
<li>Update the version of module <b>A</b> to <b>1.0.1-SNAPSHOT</b></li>
  
<li>Update the version of module <b>B</b> to <b>1.0.1-SNAPSHOT</b></li>
  
<li>In module <b>B</b>, update the dependency to module <b>A</b> with version <b>1.0.1-SNAPSHOT</b></li>
  
<li>Commit and push the changes to the SCM repository with a specified comment</li>
</ul>
<p>Some time later, you would like to release your work on project <b>B</b>. Since the last release, all introduced changes only affected module <b>B</b>. You could now think, that <b>parent</b> and <b>A</b> will also be released because the plugin pushed their incremented SNAPSHOT-versions changes during last release to the SCM repository. This will <i>not</i> happen, because the plugin detects that effectively only module <b>B</b> has been changed. This means that the plugin ignores its own changes when it calculates which modules need to be released. In our example, the plugin would walk through following steps during release:</p>

<ul>
  
<li>Detect that only module <b>B</b> has effectively been changed</li>
  
<li>In module <b>B</b>, update the dependency to module <b>A</b> with the latest release version <b>1.0.0</b></li>
  
<li>Update the version of module <b>B</b> to <b>1.0.1</b></li>
  
<li>Perform tagging and releasing of module <b>B</b></li>
  
<li>Update the version of module <b>B</b> to <b>1.0.2-SNAPSHOT</b></li>
  
<li>In module <b>B</b>, update the dependency to module <b>A</b> with the latest SNAPSHOT version <b>1.0.1-SNAPSHOT</b></li>
  
<li>Commit and push the changes to the SCM repository with a specified comment</li>
</ul>
<p>As you can see, only module <b>B</b> will be processed, project <b>parent</b> and module <b>A</b> will not be touched at all. This kind of change control also works with dependencies to parent poms.</p></div></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
                      <div class="row-fluid">
                                      <p >Copyright &copy;                   2016.
          All rights reserved.    
      </p>
                </div>

        
                </div>
    </footer>
        </body>
</html>
